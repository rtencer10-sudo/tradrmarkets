<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tradr Markets â€” Predict. Win. Repeat.</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow+Condensed:wght@300;400;600;700&family=Barlow:wght@300;400;500&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --black: #080A0E;
  --deep: #0D1117;
  --surface: #131820;
  --border: #1E2730;
  --muted: #2A3441;
  --text-dim: #4A5A6B;
  --text-mid: #8A9BAD;
  --text: #C8D6E5;
  --white: #F0F6FF;
  --accent: #00D4FF;
  --green: #10B981;
  --red: #EF4444;
  --gold: #F59E0B;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { background:var(--black); color:var(--text); font-family:'Barlow',sans-serif; font-weight:300; overflow-x:hidden; }
body::before { content:''; position:fixed; inset:0; background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.02) 2px,rgba(0,0,0,0.02) 4px); pointer-events:none; z-index:1000; }

/* NAV */
nav { position:sticky; top:0; z-index:100; height:56px; background:rgba(8,10,14,0.95); backdrop-filter:blur(16px); border-bottom:1px solid var(â€“border); display:flex; align-items:center; justify-content:space-between; padding:0 24px; gap:12px; }
.nav-logo { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:20px; letter-spacing:0.1em; color:var(â€“white); display:flex; align-items:center; gap:8px; cursor:pointer; flex-shrink:0; }
.nav-logo span { color:var(â€“accent); }
.nav-tabs { display:flex; gap:2px; }
.nav-tab { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:12px; font-weight:600; letter-spacing:0.1em; text-transform:uppercase; padding:6px 12px; border:none; background:none; color:var(â€“text-dim); cursor:pointer; transition:all 0.15s; }
.nav-tab:hover { color:var(â€“text); }
.nav-tab.active { background:rgba(0,212,255,0.1); color:var(â€“accent); }
.nav-right { display:flex; align-items:center; gap:8px; flex-shrink:0; }
.balance-pill { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:12px; color:var(â€“text-mid); background:var(â€“surface); border:1px solid var(â€“border); padding:5px 10px; white-space:nowrap; }
.balance-pill strong { color:var(â€“green); }

/* BUTTONS */
.btn { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:12px; font-weight:700; letter-spacing:0.1em; text-transform:uppercase; border:none; padding:7px 14px; cursor:pointer; transition:all 0.2s; }
.btn-accent { background:var(â€“accent); color:var(â€“black); clip-path:polygon(0 0,calc(100% - 6px) 0,100% 6px,100% 100%,0 100%); }
.btn-accent:hover { background:var(â€“white); }
.btn-ghost { background:none; border:1px solid var(â€“border); color:var(â€“text-dim); }
.btn-ghost:hover { border-color:var(â€“text-mid); color:var(â€“text); }
.btn-green { background:rgba(16,185,129,0.15); border:1px solid rgba(16,185,129,0.4); color:var(â€“green); }
.btn-green:hover { background:rgba(16,185,129,0.25); }
.btn-red { background:rgba(239,68,68,0.15); border:1px solid rgba(239,68,68,0.4); color:var(â€“red); }
.btn-red:hover { background:rgba(239,68,68,0.25); }
.btn-sm { padding:4px 10px; font-size:11px; }
.btn-lg { padding:12px 28px; font-size:14px; width:100%; text-align:center; }

/* PAGES */
.page { display:none; padding:24px; max-width:1200px; margin:0 auto; }
.page.active { display:block; }

/* PAGE HEADER */
.page-title { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:32px; color:var(â€“white); letter-spacing:0.04em; }
.page-sub { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:12px; color:var(â€“text-dim); letter-spacing:0.12em; text-transform:uppercase; margin-top:4px; }
.page-header { display:flex; align-items:flex-end; justify-content:space-between; margin-bottom:20px; flex-wrap:wrap; gap:12px; }

/* FILTERS */
.filters { display:flex; gap:5px; flex-wrap:wrap; }
.filter-btn { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:11px; font-weight:600; letter-spacing:0.1em; text-transform:uppercase; background:none; border:1px solid var(â€“border); color:var(â€“text-dim); padding:5px 12px; cursor:pointer; transition:all 0.15s; }
.filter-btn.active,.filter-btn:hover { color:var(â€“accent); border-color:var(â€“accent); background:rgba(0,212,255,0.05); }

/* MARKETS GRID */
.markets-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:1px; background:var(â€“border); border:1px solid var(â€“border); }
.market-card { background:var(â€“deep); padding:20px; cursor:pointer; transition:background 0.15s; position:relative; overflow:hidden; }
.market-card:hover { background:var(â€“surface); }
.market-card::after { content:â€™â€™; position:absolute; bottom:0; left:0; right:0; height:2px; background:linear-gradient(90deg,transparent,var(â€“accent),transparent); opacity:0; transition:opacity 0.3s; }
.market-card:hover::after { opacity:1; }
.card-tag { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:9px; letter-spacing:0.2em; text-transform:uppercase; color:var(â€“text-dim); margin-bottom:10px; display:flex; align-items:center; gap:6px; }
.tag-dot { width:5px; height:5px; border-radius:50%; flex-shrink:0; }
.card-q { font-size:14px; color:var(â€“text); line-height:1.45; margin-bottom:14px; min-height:40px; }
.prob-row { display:flex; justify-content:space-between; margin-bottom:5px; }
.prob-yes { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:22px; color:var(â€“green); }
.prob-no { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:22px; color:var(â€“red); }
.prob-bar { height:3px; background:var(â€“muted); margin-bottom:12px; overflow:hidden; }
.prob-fill { height:100%; background:linear-gradient(90deg,var(â€“green),#0EA5E9); transition:width 0.8s ease; }
.card-footer { display:flex; justify-content:space-between; padding-top:10px; border-top:1px solid var(â€“border); }
.card-meta { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:10px; color:var(â€“text-dim); }
.resolved-pill { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:10px; font-weight:700; letter-spacing:0.1em; text-transform:uppercase; padding:2px 8px; }

/* MARKET DETAIL */
#page-detail { display:none; }
#page-detail.active { display:block; }
.back-btn { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:12px; font-weight:600; letter-spacing:0.1em; text-transform:uppercase; color:var(â€“text-dim); background:none; border:none; cursor:pointer; margin-bottom:20px; display:flex; align-items:center; gap:8px; transition:color 0.2s; }
.back-btn:hover { color:var(â€“text); }
.detail-wrap { max-width:720px; }
.detail-box { border:1px solid var(â€“border); background:var(â€“deep); padding:24px; margin-bottom:1px; position:relative; overflow:hidden; }
.detail-box::before { content:â€™â€™; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,transparent,var(â€“accent),transparent); }
.detail-cat { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:10px; letter-spacing:0.2em; text-transform:uppercase; color:var(â€“accent); margin-bottom:10px; }
.detail-q { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:24px; font-weight:600; color:var(â€“white); line-height:1.3; margin-bottom:20px; }
.big-probs { display:flex; align-items:center; gap:20px; margin-bottom:16px; }
.big-yes { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:52px; color:var(â€“green); line-height:1; }
.big-no { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:52px; color:var(â€“red); line-height:1; }
.big-bar { flex:1; height:7px; background:var(â€“muted); overflow:hidden; }
.big-fill { height:100%; background:linear-gradient(90deg,var(â€“green),#0EA5E9); transition:width 0.8s; }
.detail-stats { display:grid; grid-template-columns:repeat(3,1fr); gap:1px; background:var(â€“border); border:1px solid var(â€“border); margin-bottom:20px; }
.d-stat { background:var(â€“surface); padding:14px; }
.d-stat-label { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:9px; letter-spacing:0.15em; text-transform:uppercase; color:var(â€“text-dim); margin-bottom:5px; }
.d-stat-value { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:22px; color:var(â€“white); }

/* BET PANEL */
.bet-panel { border:1px solid var(â€“border); background:var(â€“deep); padding:22px; }
.bet-title { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:13px; font-weight:700; letter-spacing:0.15em; text-transform:uppercase; color:var(â€“text-mid); margin-bottom:14px; }
.bet-sides { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-bottom:14px; }
.bet-side { border:2px solid var(â€“border); padding:12px; cursor:pointer; transition:all 0.15s; text-align:center; }
.bet-side.yes.sel { border-color:var(â€“green); background:rgba(16,185,129,0.08); }
.bet-side.no.sel { border-color:var(â€“red); background:rgba(239,68,68,0.08); }
.side-label { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:26px; letter-spacing:0.06em; }
.side-yes .side-label { color:var(â€“green); }
.side-no .side-label { color:var(â€“red); }
.side-price { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:10px; color:var(â€“text-dim); }
.bet-input { width:100%; background:var(â€“surface); border:1px solid var(â€“border); color:var(â€“white); font-family:â€˜JetBrains Monoâ€™,monospace; font-size:14px; padding:10px 12px; outline:none; margin-bottom:8px; transition:border-color 0.15s; }
.bet-input:focus { border-color:var(â€“accent); }
.quick-amts { display:flex; gap:5px; margin-bottom:14px; flex-wrap:wrap; }
.quick-btn { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:10px; background:var(â€“surface); border:1px solid var(â€“border); color:var(â€“text-dim); padding:5px 10px; cursor:pointer; transition:all 0.15s; }
.quick-btn:hover { border-color:var(â€“text-mid); color:var(â€“text); }
.bet-summary { background:var(â€“surface); border:1px solid var(â€“border); padding:12px; margin-bottom:14px; }
.sum-row { display:flex; justify-content:space-between; padding:3px 0; }
.sum-label { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:10px; color:var(â€“text-dim); letter-spacing:0.1em; text-transform:uppercase; }
.sum-val { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:11px; color:var(â€“text); }
.sum-val.profit { color:var(â€“green); }
.bet-msg { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:13px; padding:9px 12px; margin-bottom:10px; text-align:center; font-weight:600; letter-spacing:0.05em; }
.bet-msg.ok { background:rgba(16,185,129,0.1); border:1px solid rgba(16,185,129,0.3); color:var(â€“green); }
.bet-msg.err { background:rgba(239,68,68,0.1); border:1px solid rgba(239,68,68,0.3); color:var(â€“red); }

/* PORTFOLIO */
.port-stats { display:grid; grid-template-columns:repeat(4,1fr); gap:1px; background:var(â€“border); border:1px solid var(â€“border); margin-bottom:22px; }
.port-stat { background:var(â€“deep); padding:18px; }
.port-stat-label { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:9px; letter-spacing:0.15em; text-transform:uppercase; color:var(â€“text-dim); margin-bottom:6px; }
.port-stat-value { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:28px; letter-spacing:0.03em; }
.sec-title { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:24px; color:var(â€“white); letter-spacing:0.04em; margin-bottom:14px; }
.pos-table { border:1px solid var(â€“border); background:var(â€“deep); }
.pos-head,.pos-row { display:grid; grid-template-columns:1fr 75px 85px 85px 80px; padding:10px 18px; gap:8px; align-items:center; }
.pos-head { border-bottom:1px solid var(â€“border); background:var(â€“surface); }
.pos-th { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:9px; letter-spacing:0.15em; text-transform:uppercase; color:var(â€“text-dim); }
.pos-row { border-bottom:1px solid var(â€“border); transition:background 0.1s; }
.pos-row:last-child { border-bottom:none; }
.pos-row:hover { background:var(â€“surface); }
.pos-q { font-size:12px; color:var(â€“text); line-height:1.3; cursor:pointer; }
.pos-q:hover { color:var(â€“accent); }
.pos-badge { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:10px; font-weight:700; letter-spacing:0.1em; text-transform:uppercase; padding:2px 7px; display:inline-block; }
.badge-yes { background:rgba(16,185,129,0.15); color:var(â€“green); border:1px solid rgba(16,185,129,0.3); }
.badge-no { background:rgba(239,68,68,0.15); color:var(â€“red); border:1px solid rgba(239,68,68,0.3); }
.pos-mono { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:11px; color:var(â€“text-mid); }
.pnl-pos { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:11px; color:var(â€“green); }
.pnl-neg { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:11px; color:var(â€“red); }
.sell-btn { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:10px; font-weight:700; letter-spacing:0.08em; text-transform:uppercase; background:rgba(239,68,68,0.1); border:1px solid rgba(239,68,68,0.3); color:var(â€“red); padding:4px 8px; cursor:pointer; transition:all 0.15s; }
.sell-btn:hover { background:rgba(239,68,68,0.2); }
.divider { height:1px; background:var(â€“border); margin:22px 0; }
.empty { text-align:center; padding:48px 24px; }
.empty-icon { font-size:36px; margin-bottom:12px; }
.empty-title { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:22px; color:var(â€“text-mid); letter-spacing:0.06em; margin-bottom:8px; }
.empty-desc { font-size:13px; color:var(â€“text-dim); margin-bottom:16px; }

/* LEADERBOARD */
.lb-table { border:1px solid var(â€“border); background:var(â€“deep); }
.lb-head,.lb-row { display:grid; grid-template-columns:44px 1fr 110px 100px 90px; padding:10px 18px; gap:8px; align-items:center; }
.lb-head { border-bottom:1px solid var(â€“border); background:var(â€“surface); }
.lb-row { border-bottom:1px solid var(â€“border); transition:background 0.1s; }
.lb-row:last-child { border-bottom:none; }
.lb-row:hover { background:var(â€“surface); }
.lb-row.you { background:rgba(0,212,255,0.04); border-left:2px solid var(â€“accent); }
.lb-rank { font-family:â€˜Bebas Neueâ€™,sans-serif; font-size:20px; color:var(â€“text-dim); }
.rank-1 { color:var(â€“gold); }
.rank-2 { color:#94A3B8; }
.rank-3 { color:#CD7F32; }
.lb-name { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:14px; font-weight:600; color:var(â€“text); }
.lb-name.you { color:var(â€“accent); }
.you-tag { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:9px; color:var(â€“accent); letter-spacing:0.1em; margin-left:8px; }
.lb-mono { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:11px; color:var(â€“text-mid); text-align:right; }

/* ADMIN */
.admin-grid { display:grid; grid-template-columns:1fr 1fr; gap:18px; }
.admin-panel { border:1px solid var(â€“border); background:var(â€“deep); padding:22px; }
.admin-title { font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:13px; font-weight:700; letter-spacing:0.15em; text-transform:uppercase; color:var(â€“text-mid); margin-bottom:18px; display:flex; align-items:center; gap:8px; }
.admin-title::before { content:â€™â€™; width:3px; height:14px; background:var(â€“accent); }
.form-group { margin-bottom:12px; }
.form-label { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:10px; letter-spacing:0.15em; text-transform:uppercase; color:var(â€“text-dim); display:block; margin-bottom:5px; }
.form-input,.form-select { width:100%; background:var(â€“surface); border:1px solid var(â€“border); color:var(â€“white); font-family:â€˜Barlowâ€™,sans-serif; font-size:13px; padding:8px 10px; outline:none; transition:border-color 0.15s; }
.form-input:focus { border-color:var(â€“accent); }
.resolve-item { display:flex; align-items:flex-start; justify-content:space-between; padding:11px 0; border-bottom:1px solid var(â€“border); gap:10px; }
.resolve-item:last-child { border-bottom:none; }
.resolve-q { font-size:12px; color:var(â€“text); line-height:1.4; flex:1; }
.resolve-btns { display:flex; gap:5px; flex-shrink:0; }

/* TOAST */
.toast { position:fixed; bottom:20px; right:20px; background:var(â€“surface); border:1px solid var(â€“border); border-left:3px solid var(â€“accent); padding:12px 18px; font-family:â€˜Barlow Condensedâ€™,sans-serif; font-size:13px; font-weight:600; letter-spacing:0.05em; color:var(â€“white); z-index:9999; animation:slideIn 0.3s ease; max-width:300px; }
@keyframes slideIn { from{transform:translateX(110%);opacity:0} to{transform:translateX(0);opacity:1} }

/* LIVE DOT */
.live { display:inline-flex; align-items:center; gap:5px; font-family:â€˜JetBrains Monoâ€™,monospace; font-size:9px; color:var(â€“green); letter-spacing:0.1em; }
.live::before { content:â€™â€™; width:5px; height:5px; border-radius:50%; background:var(â€“green); animation:pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1}50%{opacity:0.4} }

/* TAG */
.tag { font-family:â€˜JetBrains Monoâ€™,monospace; font-size:9px; letter-spacing:0.15em; text-transform:uppercase; padding:2px 7px; border:1px solid var(â€“border); color:var(â€“text-dim); }

@media(max-width:700px){
.markets-grid{grid-template-columns:1fr}
.port-stats{grid-template-columns:repeat(2,1fr)}
.pos-head,.pos-row{grid-template-columns:1fr 65px 75px}
.pos-th:nth-child(4),.pos-row>*:nth-child(4),.pos-th:nth-child(5),.pos-row>*:nth-child(5){display:none}
.admin-grid{grid-template-columns:1fr}
.lb-head,.lb-row{grid-template-columns:36px 1fr 90px}
.lb-head>*:nth-child(4),.lb-row>*:nth-child(4),.lb-head>*:nth-child(5),.lb-row>*:nth-child(5){display:none}
.nav-tabs .nav-tab{padding:6px 8px;font-size:11px}
.detail-stats{grid-template-columns:1fr 1fr}
}
</style>

</head>
<body>

<nav>
  <div class="nav-logo" onclick="showPage('markets')">
    <svg width="20" height="24" viewBox="0 0 32 36" fill="none">
      <path d="M16 0L0 6V18C0 27.3 7.3 35.1 16 36C24.7 35.1 32 27.3 32 18V6L16 0Z" fill="#0D1117"/>
      <path d="M16 1.5L1.5 7.2V18C1.5 26.6 8.1 34 16 34.5C23.9 34 30.5 26.6 30.5 18V7.2L16 1.5Z" stroke="#00D4FF" stroke-width="0.8"/>
      <rect x="10" y="16" width="2" height="8" fill="#00D4FF"/>
      <rect x="14" y="12" width="2" height="12" fill="#00D4FF"/>
      <rect x="18" y="14" width="2" height="10" fill="#00D4FF"/>
      <rect x="22" y="10" width="2" height="14" fill="#00D4FF"/>
    </svg>
    TRADR <span>MARKETS</span>
  </div>
  <div class="nav-tabs">
    <button class="nav-tab active" onclick="showPage('markets')" id="tab-markets">Markets</button>
    <button class="nav-tab" onclick="showPage('portfolio')" id="tab-portfolio">Portfolio</button>
    <button class="nav-tab" onclick="showPage('leaderboard')" id="tab-leaderboard">Leaderboard</button>
    <button class="nav-tab" onclick="showPage('admin')" id="tab-admin">Admin</button>
  </div>
  <div class="nav-right">
    <div class="balance-pill">Balance: <strong id="balance-display">$1,000.00</strong></div>
    <button class="btn btn-ghost btn-sm" onclick="addFunds()">+ Funds</button>
  </div>
</nav>

<!-- MARKETS PAGE -->

<div class="page active" id="page-markets">
  <div class="page-header">
    <div>
      <div class="page-title">LIVE MARKETS</div>
      <div class="page-sub" id="markets-sub"></div>
    </div>
    <div class="filters" id="market-filters"></div>
  </div>
  <div class="markets-grid" id="markets-grid"></div>
</div>

<!-- DETAIL PAGE -->

<div class="page" id="page-detail">
  <button class="back-btn" onclick="showPage('markets')">â† Back to Markets</button>
  <div class="detail-wrap">
    <div class="detail-box">
      <div class="detail-cat" id="d-cat"></div>
      <div class="detail-q" id="d-q"></div>
      <div class="big-probs">
        <span class="big-yes" id="d-yes-big"></span>
        <div class="big-bar"><div class="big-fill" id="d-bar-fill"></div></div>
        <span class="big-no" id="d-no-big"></span>
      </div>
      <div class="detail-stats">
        <div class="d-stat"><div class="d-stat-label">Volume</div><div class="d-stat-value" id="d-vol"></div></div>
        <div class="d-stat"><div class="d-stat-label">Status</div><div class="d-stat-value" id="d-status"></div></div>
        <div class="d-stat"><div class="d-stat-label">Expiry</div><div class="d-stat-value" style="font-size:15px;margin-top:4px;" id="d-expiry"></div></div>
      </div>
    </div>
    <div class="bet-panel" id="bet-panel">
      <div class="bet-title">Place Your Prediction</div>
      <div class="bet-sides">
        <div class="bet-side yes side-yes sel" id="side-yes" onclick="selectSide('YES')">
          <div class="side-label">YES</div>
          <div class="side-price" id="yes-price"></div>
        </div>
        <div class="bet-side no side-no" id="side-no" onclick="selectSide('NO')">
          <div class="side-label">NO</div>
          <div class="side-price" id="no-price"></div>
        </div>
      </div>
      <input class="bet-input" type="number" id="bet-amount" placeholder="$ Enter amount" min="1" oninput="updateSummary()">
      <div class="quick-amts">
        <button class="quick-btn" onclick="setAmt(10)">$10</button>
        <button class="quick-btn" onclick="setAmt(25)">$25</button>
        <button class="quick-btn" onclick="setAmt(50)">$50</button>
        <button class="quick-btn" onclick="setAmt(100)">$100</button>
        <button class="quick-btn" onclick="setAmt(250)">$250</button>
        <button class="quick-btn" onclick="setMax()">MAX</button>
      </div>
      <div class="bet-summary" id="bet-summary" style="display:none">
        <div class="sum-row"><span class="sum-label">Shares</span><span class="sum-val" id="sum-shares"></span></div>
        <div class="sum-row"><span class="sum-label">Cost</span><span class="sum-val" id="sum-cost"></span></div>
        <div class="sum-row"><span class="sum-label">If correct</span><span class="sum-val profit" id="sum-profit"></span></div>
        <div class="sum-row"><span class="sum-label">Return</span><span class="sum-val profit" id="sum-return"></span></div>
      </div>
      <div id="bet-msg"></div>
      <button class="btn btn-lg btn-green" id="bet-btn" onclick="placeBet()">Buy YES</button>
    </div>
    <div id="resolved-box" style="display:none; border:1px solid var(--border); background:var(--deep); padding:24px; text-align:center;">
      <div id="resolved-text" style="font-family:'Bebas Neue',sans-serif; font-size:28px; letter-spacing:0.04em; margin-bottom:8px;"></div>
      <div style="font-family:'Barlow Condensed',sans-serif; font-size:13px; color:var(--text-dim);">This market has been resolved. Winning positions have been paid out.</div>
    </div>
  </div>
</div>

<!-- PORTFOLIO PAGE -->

<div class="page" id="page-portfolio">
  <div class="page-header"><div><div class="page-title">MY PORTFOLIO</div><div class="page-sub">Positions & P&L</div></div></div>
  <div class="port-stats">
    <div class="port-stat"><div class="port-stat-label">Balance</div><div class="port-stat-value" style="color:var(--accent)" id="port-balance"></div></div>
    <div class="port-stat"><div class="port-stat-label">Invested</div><div class="port-stat-value" id="port-invested"></div></div>
    <div class="port-stat"><div class="port-stat-label">Total P&L</div><div class="port-stat-value" id="port-pnl"></div></div>
    <div class="port-stat"><div class="port-stat-label">Trades</div><div class="port-stat-value" id="port-trades"></div></div>
  </div>
  <div class="sec-title">Open Positions</div>
  <div id="open-positions"></div>
  <div id="closed-section" style="display:none">
    <div class="divider"></div>
    <div class="sec-title">Closed Positions</div>
    <div id="closed-positions"></div>
  </div>
</div>

<!-- LEADERBOARD PAGE -->

<div class="page" id="page-leaderboard">
  <div class="page-header"><div><div class="page-title">LEADERBOARD</div><div class="page-sub">Top predictors by profit</div></div></div>
  <div class="lb-table">
    <div class="lb-head">
      <span class="pos-th">#</span>
      <span class="pos-th">Trader</span>
      <span class="pos-th" style="text-align:right">Profit</span>
      <span class="pos-th" style="text-align:right">Accuracy</span>
      <span class="pos-th" style="text-align:right">Trades</span>
    </div>
    <div id="lb-rows"></div>
  </div>
</div>

<!-- ADMIN PAGE -->

<div class="page" id="page-admin">
  <div class="page-header"><div><div class="page-title">ADMIN PANEL</div><div class="page-sub">Create & resolve markets</div></div></div>
  <div class="admin-grid">
    <div class="admin-panel">
      <div class="admin-title">Create New Market</div>
      <div class="form-group"><label class="form-label">Question</label><input class="form-input" id="new-q" placeholder="Will NVDA hit $200 by Q2?"></div>
      <div class="form-group"><label class="form-label">Ticker</label><input class="form-input" id="new-ticker" placeholder="NVDA"></div>
      <div class="form-group"><label class="form-label">Category</label>
        <select class="form-select" id="new-cat">
          <option>STOCK</option><option>MACRO</option><option>EARNINGS</option><option>CRYPTO</option><option>IPO</option>
        </select>
      </div>
      <div class="form-group"><label class="form-label">Expiry</label><input class="form-input" id="new-expiry" placeholder="Jun 30, 2026"></div>
      <button class="btn btn-accent" style="width:100%;margin-top:4px;padding:10px;" onclick="createMarket()">Create Market</button>
    </div>
    <div class="admin-panel">
      <div class="admin-title">Resolve Markets</div>
      <div id="resolve-list"></div>
    </div>
  </div>
</div>

<div id="toast" class="toast" style="display:none"></div>

<script>
// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let balance = 1000;
let currentMarketId = null;
let currentSide = 'YES';
let positions = [];
let markets = [
  {id:1,cat:'STOCK',ticker:'NVDA',q:'Will NVDA close above $145 by end of Q1 2026?',yes:0.68,vol:892000,exp:'Mar 31, 2026',resolved:false,result:null},
  {id:2,cat:'MACRO',ticker:'FED',q:'Will the Fed cut rates at the March 2026 FOMC meeting?',yes:0.41,vol:2100000,exp:'Mar 19, 2026',resolved:false,result:null},
  {id:3,cat:'EARNINGS',ticker:'TSLA',q:'Will TSLA report positive EPS in Q1 2026 earnings?',yes:0.54,vol:456000,exp:'Apr 22, 2026',resolved:false,result:null},
  {id:4,cat:'STOCK',ticker:'AAPL',q:'Will AAPL close above $250 before end of 2026?',yes:0.72,vol:1300000,exp:'Dec 31, 2026',resolved:false,result:null},
  {id:5,cat:'CRYPTO',ticker:'BTC',q:'Will Bitcoin hit $120,000 at any point in Q2 2026?',yes:0.38,vol:3400000,exp:'Jun 30, 2026',resolved:false,result:null},
  {id:6,cat:'MACRO',ticker:'ECON',q:'Will the US enter a technical recession in H1 2026?',yes:0.27,vol:780000,exp:'Jun 30, 2026',resolved:false,result:null},
  {id:7,cat:'EARNINGS',ticker:'META',q:'Will META beat Q1 2026 revenue estimates?',yes:0.61,vol:540000,exp:'Apr 29, 2026',resolved:false,result:null},
  {id:8,cat:'STOCK',ticker:'MSFT',q:'Will MSFT hit $500 before Q3 2026?',yes:0.49,vol:670000,exp:'Sep 30, 2026',resolved:false,result:null},
  {id:9,cat:'IPO',ticker:'IPO',q:'Will there be a major tech IPO (>$10B) in Q2 2026?',yes:0.55,vol:320000,exp:'Jun 30, 2026',resolved:false,result:null},
];
const catColors = {STOCK:'#00D4FF',MACRO:'#F59E0B',EARNINGS:'#10B981',CRYPTO:'#F7931A',IPO:'#A78BFA'};
const lbUsers = [
  {name:'SharpTrader_99',profit:12840,acc:71,trades:94},
  {name:'MarketWizard',profit:9320,acc:68,trades:71},
  {name:'Quant_Kelly',profit:7650,acc:65,trades:88},
  {name:'BullsAndBears',profit:5420,acc:63,trades:55},
  {name:'AlphaSeeker',profit:4180,acc:61,trades:42},
  {name:'FedWatcher',profit:3290,acc:59,trades:38},
  {name:'VolTrader',profit:2140,acc:57,trades:61},
  {name:'MacroMike',profit:1880,acc:55,trades:29},
];
let activeFilter = 'ALL';

// â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const fmt = n => n >= 1000000 ? '$'+(n/1000000).toFixed(1)+'M' : n >= 1000 ? '$'+(n/1000).toFixed(0)+'K' : '$'+n.toFixed(2);
const fmtC = n => '$'+n.toFixed(2);
const fmtPct = n => (n*100).toFixed(0)+'%';

function toast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.style.display = 'block';
  clearTimeout(window._toastTimer);
  window._toastTimer = setTimeout(() => el.style.display = 'none', 3000);
}

// â”€â”€ NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showPage(name) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('page-'+name).classList.add('active');
  const tab = document.getElementById('tab-'+name);
  if (tab) tab.classList.add('active');
  if (name === 'markets') renderMarkets();
  if (name === 'portfolio') renderPortfolio();
  if (name === 'leaderboard') renderLeaderboard();
  if (name === 'admin') renderAdmin();
}

function openMarket(id) {
  currentMarketId = id;
  currentSide = 'YES';
  document.getElementById('bet-amount').value = '';
  document.getElementById('bet-summary').style.display = 'none';
  document.getElementById('bet-msg').innerHTML = '';
  updateDetailView();
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-detail').classList.add('active');
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('tab-markets').classList.add('active');
}

// â”€â”€ MARKETS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderMarkets() {
  const open = markets.filter(m=>!m.resolved).length;
  const resolved = markets.filter(m=>m.resolved).length;
  document.getElementById('markets-sub').innerHTML = `<span class="live">LIVE</span> &nbsp;${open} open Â· ${resolved} resolved`;

  const cats = ['ALL','STOCK','MACRO','EARNINGS','CRYPTO','IPO'];
  document.getElementById('market-filters').innerHTML = cats.map(c =>
    `<button class="filter-btn ${activeFilter===c?'active':''}" onclick="setFilter('${c}')">${c}</button>`
  ).join('');

  const filtered = markets.filter(m => activeFilter==='ALL' || m.cat===activeFilter);
  document.getElementById('markets-grid').innerHTML = filtered.map(m => {
    const yPct = (m.yes*100).toFixed(0);
    const nPct = ((1-m.yes)*100).toFixed(0);
    const resolvedBadge = m.resolved ? `<span class="resolved-pill" style="background:${m.result==='YES'?'rgba(16,185,129,0.15)':'rgba(239,68,68,0.15)'};color:${m.result==='YES'?'var(--green)':'var(--red)'};border:1px solid ${m.result==='YES'?'rgba(16,185,129,0.3)':'rgba(239,68,68,0.3)'}">${m.result}</span>` : '';
    return `<div class="market-card" onclick="openMarket(${m.id})">
      <div class="card-tag"><span class="tag-dot" style="background:${catColors[m.cat]||'var(--accent)'}"></span>${m.cat} Â· ${m.ticker} ${resolvedBadge}</div>
      <div class="card-q">${m.q}</div>
      <div class="prob-row"><span class="prob-yes">${yPct}% YES</span><span class="prob-no">${nPct}% NO</span></div>
      <div class="prob-bar"><div class="prob-fill" style="width:${yPct}%"></div></div>
      <div class="card-footer"><span class="card-meta">${fmt(m.vol)} vol</span><span class="card-meta">Exp ${m.exp}</span></div>
    </div>`;
  }).join('');
}

function setFilter(f) {
  activeFilter = f;
  renderMarkets();
}

// â”€â”€ DETAIL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateDetailView() {
  const m = markets.find(x=>x.id===currentMarketId);
  if (!m) return;
  const yPct = (m.yes*100).toFixed(0);
  const nPct = ((1-m.yes)*100).toFixed(0);
  document.getElementById('d-cat').textContent = `${m.cat} Â· ${m.ticker} Â· Expires ${m.exp}`;
  document.getElementById('d-cat').style.color = catColors[m.cat]||'var(--accent)';
  document.getElementById('d-q').textContent = m.q;
  document.getElementById('d-yes-big').textContent = yPct+'Â¢';
  document.getElementById('d-no-big').textContent = nPct+'Â¢';
  document.getElementById('d-bar-fill').style.width = yPct+'%';
  document.getElementById('d-vol').textContent = fmt(m.vol);
  document.getElementById('d-status').textContent = m.resolved ? 'RESOLVED '+m.result : 'OPEN';
  document.getElementById('d-status').style.color = m.resolved ? 'var(--gold)' : 'var(--green)';
  document.getElementById('d-expiry').textContent = m.exp;
  document.getElementById('yes-price').textContent = yPct+'Â¢ per share';
  document.getElementById('no-price').textContent = nPct+'Â¢ per share';

  if (m.resolved) {
    document.getElementById('bet-panel').style.display = 'none';
    document.getElementById('resolved-box').style.display = 'block';
    document.getElementById('resolved-text').textContent = 'RESOLVED: '+m.result;
    document.getElementById('resolved-text').style.color = m.result==='YES' ? 'var(--green)' : 'var(--red)';
  } else {
    document.getElementById('bet-panel').style.display = 'block';
    document.getElementById('resolved-box').style.display = 'none';
  }
  updateBetBtn();
}

function selectSide(side) {
  currentSide = side;
  document.getElementById('side-yes').classList.toggle('sel', side==='YES');
  document.getElementById('side-no').classList.toggle('sel', side==='NO');
  updateBetBtn();
  updateSummary();
}

function updateBetBtn() {
  const btn = document.getElementById('bet-btn');
  if (currentSide === 'YES') {
    btn.textContent = 'Buy YES';
    btn.className = 'btn btn-lg btn-green';
  } else {
    btn.textContent = 'Buy NO';
    btn.className = 'btn btn-lg btn-red';
  }
}

function setAmt(n) {
  document.getElementById('bet-amount').value = Math.min(n, balance);
  updateSummary();
}

function setMax() {
  document.getElementById('bet-amount').value = Math.floor(balance);
  updateSummary();
}

function updateSummary() {
  const amt = parseFloat(document.getElementById('bet-amount').value)||0;
  const m = markets.find(x=>x.id===currentMarketId);
  if (!m || amt <= 0) { document.getElementById('bet-summary').style.display='none'; return; }
  const price = currentSide==='YES' ? m.yes : (1-m.yes);
  const shares = amt/price;
  const profit = shares - amt;
  document.getElementById('sum-shares').textContent = shares.toFixed(2);
  document.getElementById('sum-cost').textContent = fmtC(amt);
  document.getElementById('sum-profit').textContent = '+'+fmtC(profit)+' profit';
  document.getElementById('sum-return').textContent = ((profit/amt)*100).toFixed(0)+'%';
  document.getElementById('bet-summary').style.display = 'block';
}

function placeBet() {
  const amt = parseFloat(document.getElementById('bet-amount').value);
  const msgEl = document.getElementById('bet-msg');
  if (!amt || amt <= 0) { msgEl.innerHTML = '<div class="bet-msg err">Enter a valid amount</div>'; return; }
  if (amt > balance) { msgEl.innerHTML = '<div class="bet-msg err">Insufficient balance</div>'; return; }
  if (amt < 1) { msgEl.innerHTML = '<div class="bet-msg err">Minimum bet is $1</div>'; return; }

  const m = markets.find(x=>x.id===currentMarketId);
  const price = currentSide==='YES' ? m.yes : (1-m.yes);
  const shares = amt/price;

  positions.push({
    id: Date.now(),
    marketId: m.id,
    q: m.q,
    side: currentSide,
    amount: amt,
    buyPrice: price,
    shares,
    sold: false,
    resolved: false,
    payout: 0,
    sellPrice: 0,
  });

  balance -= amt;
  m.vol += amt;
  updateBalanceDisplay();
  document.getElementById('bet-amount').value = '';
  document.getElementById('bet-summary').style.display = 'none';
  msgEl.innerHTML = `<div class="bet-msg ok">âœ“ ${currentSide} position opened â€” ${shares.toFixed(1)} shares @ ${(price*100).toFixed(0)}Â¢</div>`;
  toast(`Bet placed: $${amt} ${currentSide} on ${m.ticker}`);
  setTimeout(() => msgEl.innerHTML = '', 3000);
}

// â”€â”€ PORTFOLIO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderPortfolio() {
  const open = positions.filter(p=>!p.sold&&!p.resolved);
  const closed = positions.filter(p=>p.sold||p.resolved);
  const invested = open.reduce((s,p)=>s+p.amount,0);
  const pnl = positions.reduce((s,p) => {
    if (p.resolved) return s+(p.payout-p.amount);
    if (p.sold) return s+(p.sellPrice-p.amount);
    const m = markets.find(x=>x.id===p.marketId);
    if (!m) return s;
    const cur = p.side==='YES' ? m.yes : (1-m.yes);
    return s+(p.shares*cur - p.amount);
  },0);

  document.getElementById('port-balance').textContent = fmtC(balance);
  document.getElementById('port-invested').textContent = fmtC(invested);
  document.getElementById('port-pnl').textContent = (pnl>=0?'+':'')+fmtC(pnl);
  document.getElementById('port-pnl').style.color = pnl>=0 ? 'var(--green)' : 'var(--red)';
  document.getElementById('port-trades').textContent = positions.length;

  if (open.length === 0) {
    document.getElementById('open-positions').innerHTML = `<div class="empty"><div class="empty-icon">ğŸ“Š</div><div class="empty-title">No Open Positions</div><div class="empty-desc">Browse markets and place your first prediction</div><button class="btn btn-accent" onclick="showPage('markets')">Browse Markets</button></div>`;
  } else {
    document.getElementById('open-positions').innerHTML = `<div class="pos-table">
      <div class="pos-head"><span class="pos-th">Market</span><span class="pos-th">Side</span><span class="pos-th">Cost</span><span class="pos-th">P&L</span><span class="pos-th">Action</span></div>
      ${open.map(p => {
        const m = markets.find(x=>x.id===p.marketId);
        const cur = p.side==='YES' ? m.yes : (1-m.yes);
        const pnl = p.shares*cur - p.amount;
        return `<div class="pos-row">
          <span class="pos-q" onclick="openMarket(${m.id})">${p.q}</span>
          <span><span class="pos-badge ${p.side==='YES'?'badge-yes':'badge-no'}">${p.side}</span></span>
          <span class="pos-mono">${fmtC(p.amount)}</span>
          <span class="${pnl>=0?'pnl-pos':'pnl-neg'}">${pnl>=0?'+':''}${fmtC(pnl)}</span>
          <button class="sell-btn" onclick="sellPosition(${p.id})">Sell</button>
        </div>`;
      }).join('')}
    </div>`;
  }

  if (closed.length > 0) {
    document.getElementById('closed-section').style.display = 'block';
    document.getElementById('closed-positions').innerHTML = `<div class="pos-table">
      <div class="pos-head"><span class="pos-th">Market</span><span class="pos-th">Side</span><span class="pos-th">Cost</span><span class="pos-th">P&L</span><span class="pos-th">Status</span></div>
      ${closed.map(p => {
        const final = p.resolved ? p.payout : p.sellPrice;
        const pnl = final - p.amount;
        return `<div class="pos-row">
          <span class="pos-q">${p.q}</span>
          <span><span class="pos-badge ${p.side==='YES'?'badge-yes':'badge-no'}">${p.side}</span></span>
          <span class="pos-mono">${fmtC(p.amount)}</span>
          <span class="${pnl>=0?'pnl-pos':'pnl-neg'}">${pnl>=0?'+':''}${fmtC(pnl)}</span>
          <span class="tag">${p.resolved?'RESOLVED':'SOLD'}</span>
        </div>`;
      }).join('')}
    </div>`;
  } else {
    document.getElementById('closed-section').style.display = 'none';
  }
}

function sellPosition(posId) {
  const pos = positions.find(p=>p.id===posId);
  if (!pos) return;
  const m = markets.find(x=>x.id===pos.marketId);
  const cur = pos.side==='YES' ? m.yes : (1-m.yes);
  const val = pos.shares * cur;
  pos.sold = true;
  pos.sellPrice = val;
  balance += val;
  updateBalanceDisplay();
  toast(`Position sold for ${fmtC(val)}`);
  renderPortfolio();
}

// â”€â”€ LEADERBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderLeaderboard() {
  const pnl = positions.reduce((s,p) => {
    if (p.resolved) return s+(p.payout-p.amount);
    if (p.sold) return s+(p.sellPrice-p.amount);
    const m = markets.find(x=>x.id===p.marketId);
    if (!m) return s;
    return s+(p.shares*(p.side==='YES'?m.yes:(1-m.yes))-p.amount);
  },0);
  const resolved = positions.filter(p=>p.resolved);
  const won = resolved.filter(p=>p.payout>0).length;
  const acc = resolved.length > 0 ? Math.round(won/resolved.length*100) : 0;

  const all = [...lbUsers, {name:'You',profit:pnl,acc,trades:positions.length,isYou:true}]
    .sort((a,b)=>b.profit-a.profit);

  document.getElementById('lb-rows').innerHTML = all.map((u,i) => {
    const rankClass = i===0?'rank-1':i===1?'rank-2':i===2?'rank-3':'';
    return `<div class="lb-row ${u.isYou?'you':''}">
      <span class="lb-rank ${rankClass}">${i+1}</span>
      <span><span class="lb-name ${u.isYou?'you':''}">${u.name}</span>${u.isYou?'<span class="you-tag">YOU</span>':''}</span>
      <span class="lb-mono" style="color:${u.profit>=0?'var(--green)':'var(--red)'}">${u.profit>=0?'+':''}${fmtC(u.profit)}</span>
      <span class="lb-mono">${u.acc}%</span>
      <span class="lb-mono">${u.trades}</span>
    </div>`;
  }).join('');
}

// â”€â”€ ADMIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAdmin() {
  const open = markets.filter(m=>!m.resolved);
  document.getElementById('resolve-list').innerHTML = open.length === 0
    ? '<div style="color:var(--text-dim);font-size:13px;text-align:center;padding:24px 0;">All markets resolved</div>'
    : open.map(m => `<div class="resolve-item">
        <div class="resolve-q">${m.q}</div>
        <div class="resolve-btns">
          <button class="btn btn-sm btn-green" onclick="resolveMarket(${m.id},'YES')">YES</button>
          <button class="btn btn-sm btn-red" onclick="resolveMarket(${m.id},'NO')">NO</button>
        </div>
      </div>`).join('');
}

function createMarket() {
  const q = document.getElementById('new-q').value.trim();
  const ticker = document.getElementById('new-ticker').value.trim().toUpperCase();
  const cat = document.getElementById('new-cat').value;
  const exp = document.getElementById('new-expiry').value.trim();
  if (!q||!ticker||!exp) { toast('Fill in all fields'); return; }
  markets.push({id:Date.now(),cat,ticker,q,yes:0.50,vol:0,exp,resolved:false,result:null});
  document.getElementById('new-q').value='';
  document.getElementById('new-ticker').value='';
  document.getElementById('new-expiry').value='';
  toast(`Market created: ${ticker}`);
  renderAdmin();
}

function resolveMarket(id, result) {
  const m = markets.find(x=>x.id===id);
  if (!m) return;
  m.resolved = true;
  m.result = result;
  let payout = 0;
  positions.forEach(p => {
    if (p.marketId===id && !p.sold && !p.resolved) {
      p.resolved = true;
      p.payout = p.side===result ? p.shares : 0;
      payout += p.payout;
    }
  });
  balance += payout;
  updateBalanceDisplay();
  toast(`Market resolved: ${result}. Positions settled.`);
  renderAdmin();
}

// â”€â”€ MISC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function addFunds() {
  balance += 500;
  updateBalanceDisplay();
  toast('$500 added to your balance');
  if (document.getElementById('page-portfolio').classList.contains('active')) renderPortfolio();
}

function updateBalanceDisplay() {
  document.getElementById('balance-display').textContent = fmtC(balance);
}

// â”€â”€ LIVE SIMULATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
setInterval(() => {
  markets.forEach(m => {
    if (m.resolved) return;
    m.yes = Math.max(0.03, Math.min(0.97, m.yes + (Math.random()-0.5)*0.012));
  });
  if (document.getElementById('page-markets').classList.contains('active')) renderMarkets();
  if (currentMarketId && document.getElementById('page-detail').classList.contains('active')) updateDetailView();
}, 3000);

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
renderMarkets();
</script>

</body>
</html>
Sent from my iPhone
